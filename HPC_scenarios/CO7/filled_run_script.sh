#!/bin/bash
#SBATCH --job-name=RunRScriptArray
#SBATCH --output=slurm_output_%A_%a.out
#SBATCH --error=slurm_error_%A_%a.err
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --time=02:30:00
#SBATCH --mem=5G

# Define the directory where R scripts are located
R_SCRIPTS_DIR="/home/uu_vet_te/efischer/HPAI_vaccination/scenario_files/" 

# List of scenario files (adjust as needed)
SCENARIO_FILES=("script_2025_09_11_BI_CO7_Time_118_Farm_A.R" "script_2025_09_11_BI_CO7_Time_150_Farm_A.R" "script_2025_09_11_BI_CO7_Time_151_Farm_B.R" "script_2025_09_11_BI_CO7_Time_180_Farm_A.R" "script_2025_09_11_BI_CO7_Time_181_Farm_B.R" "script_2025_09_11_BI_CO7_Time_209_Farm_A.R" "script_2025_09_11_BI_CO7_Time_210_Farm_B.R" "script_2025_09_11_BI_CO7_Time_238_Farm_A.R" "script_2025_09_11_BI_CO7_Time_241_Farm_B.R" "script_2025_09_11_BI_CO7_Time_270_Farm_A.R" "script_2025_09_11_BI_CO7_Time_271_Farm_B.R" "script_2025_09_11_BI_CO7_Time_300_Farm_A.R" "script_2025_09_11_BI_CO7_Time_301_Farm_B.R" "script_2025_09_11_BI_CO7_Time_31_Farm_A.R" "script_2025_09_11_BI_CO7_Time_328_Farm_A.R" "script_2025_09_11_BI_CO7_Time_329_Farm_B.R" "script_2025_09_11_BI_CO7_Time_360_Farm_A.R" "script_2025_09_11_BI_CO7_Time_361_Farm_B.R" "script_2025_09_11_BI_CO7_Time_390_Farm_A.R" "script_2025_09_11_BI_CO7_Time_391_Farm_B.R" "script_2025_09_11_BI_CO7_Time_419_Farm_A.R" "script_2025_09_11_BI_CO7_Time_420_Farm_B.R" "script_2025_09_11_BI_CO7_Time_447_Farm_A.R" "script_2025_09_11_BI_CO7_Time_448_Farm_B.R" "script_2025_09_11_BI_CO7_Time_480_Farm_A.R" "script_2025_09_11_BI_CO7_Time_481_Farm_B.R" "script_2025_09_11_BI_CO7_Time_510_Farm_A.R" "script_2025_09_11_BI_CO7_Time_511_Farm_B.R" "script_2025_09_11_BI_CO7_Time_538_Farm_A.R" "script_2025_09_11_BI_CO7_Time_539_Farm_B.R" "script_2025_09_11_BI_CO7_Time_570_Farm_A.R" "script_2025_09_11_BI_CO7_Time_571_Farm_B.R" "script_2025_09_11_BI_CO7_Time_587_Farm_A.R" "script_2025_09_11_BI_CO7_Time_588_Farm_B.R" "script_2025_09_11_BI_CO7_Time_60_Farm_A.R" "script_2025_09_11_BI_CO7_Time_91_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_118_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_150_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_151_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_180_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_181_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_209_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_210_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_238_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_241_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_270_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_271_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_300_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_301_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_31_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_328_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_329_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_360_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_361_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_390_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_391_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_419_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_420_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_447_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_448_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_480_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_481_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_510_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_511_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_538_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_539_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_570_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_571_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_587_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_588_Farm_B.R" "script_2025_09_11_BIBOOSTER_CO7_Time_60_Farm_A.R" "script_2025_09_11_BIBOOSTER_CO7_Time_91_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_118_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_150_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_151_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_180_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_181_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_209_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_210_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_238_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_241_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_270_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_271_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_300_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_301_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_31_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_328_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_329_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_360_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_361_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_390_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_391_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_419_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_420_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_447_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_448_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_480_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_481_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_510_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_511_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_538_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_539_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_570_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_571_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_587_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_588_Farm_B.R" "script_2025_09_11_CEVA_CO7_Time_60_Farm_A.R" "script_2025_09_11_CEVA_CO7_Time_91_Farm_A.R ")
# Use the job array index to select the correct file
SCENARIO_INDEX=$SLURM_ARRAY_TASK_ID
R_SCRIPT="${R_SCRIPTS_DIR}${SCENARIO_FILES[$SCENARIO_INDEX]}"

# Check if the R script exists
if [ ! -f "$R_SCRIPT" ]; then
echo "Error: File $R_SCRIPT not found."
exit 1
fi

# Run the R script
Rscript "$R_SCRIPT" 
